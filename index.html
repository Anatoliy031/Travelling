<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Путешествия по России - Достопримечательности и Приключения</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        body { font-family: Roboto, sans-serif; margin: 0; padding: 0; background: #f4f4f4; color: #333; }
        header { background: #003366; color: white; padding: 1rem; }
        nav { display: flex; justify-content: space-between; align-items: center; }
        nav ul { list-style: none; display: flex; gap: 1rem; }
        nav a { color: white; text-decoration: none; cursor: pointer; }
        .hero { text-align: center; padding: 4rem 0; background: url('https://source.unsplash.com/random/1600x900/?russia') no-repeat center/cover; }
        #map { height: 500px; }
        #results, #attraction-list, #service-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; padding: 1rem; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 1rem; }
        .card img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; }
        .card h3 { color: #228B22; }
        button { background: #228B22; color: white; border: none; padding: 0.5rem 1rem; cursor: pointer; }
        footer { text-align: center; padding: 1rem; background: #003366; color: white; }
        .hidden { display: none; }

        /* Адаптивность */
        @media (max-width: 768px) { .hero { padding: 2rem 0; } }

        /* Темный режим (добавляется через JS, если нужно) */
        body.dark { background: #333; color: #f4f4f4; }
        body.dark .card { background: #444; }
    </style>
</head>
<body>
    <header>
        <nav>
            <h1>Путешествия по России</h1>
            <ul>
                <li><a onclick="showSection('home')">Главная</a></li>
                <li><a onclick="showSection('attractions')">Достопримечательности</a></li>
                <li><a onclick="showSection('services')">Приключения</a></li>
            </ul>
        </nav>
        <div class="hero">
            <h2>Откройте чудеса России</h2>
            <p>Интерактивный гид по достопримечательностям и приключениям. Поделитесь местоположением для персональных рекомендаций!</p>
            <button id="get-location">Найти ближайшие места</button>
        </div>
    </header>
    
    <main id="main-home">
        <section id="map-section">
            <div id="map"></div>
        </section>
        
        <section id="search-filter">
            <input type="text" id="search" placeholder="Поиск по названию или региону...">
            <select id="filter">
                <option value="">Все категории</option>
                <option value="landmark">Памятники</option>
                <option value="museum">Музеи</option>
                <option value="nature">Природа</option>
            </select>
            <div id="results"></div>
        </section>
    </main>
    
    <main id="main-attractions" class="hidden">
        <h2>Все достопримечательности</h2>
        <div id="attraction-list"></div>
    </main>
    
    <main id="main-services" class="hidden">
        <h2>Приключенческие услуги</h2>
        <p>Найдите контакты для джиппинга, байдарок, рафтинга, походов, велотуров, парапланеризма и др. Бронируйте напрямую у операторов.</p>
        <select id="activity-filter">
            <option value="">Все активности</option>
            <option value="jeep">Джиппинг</option>
            <option value="kayaking">Байдарки/Рафтинг</option>
            <option value="hiking">Походы/Велотуры</option>
            <option value="paragliding">Парапланеризм/Прочее</option>
        </select>
        <div id="service-list"></div>
    </main>
    
    <footer>
        <p>&copy; 2025 Путешествия по России. Данные из открытых источников. Для партнерства: contact@travelrussia.ru</p>
    </footer>
    
    <script>
        const attractions = [
            { name: 'Красная площадь', lat: 55.7539, lng: 37.6208, description: 'Историческая площадь в Москве.', region: 'Москва', category: 'landmark', image: 'https://source.unsplash.com/random/300x200/?moscow' },
            { name: 'Государственный Эрмитаж', lat: 59.9398, lng: 30.3146, description: 'Всемирно известный музей искусств в Санкт-Петербурге.', region: 'Санкт-Петербург', category: 'museum', image: 'https://source.unsplash.com/random/300x200/?hermitage' },
            { name: 'Озеро Байкал', lat: 53.5587, lng: 108.1650, description: 'Самое глубокое озеро в мире, объект ЮНЕСКО.', region: 'Сибирь', category: 'nature', image: 'https://source.unsplash.com/random/300x200/?baikal' },
            // Добавьте больше: ~100 записей, например, Кремль (55.7520, 37.6175), Петергоф (59.8850, 29.9086), Алтайские горы (50.6167, 86.3167) и т.д.
            // Пример полного списка: Из Википедии — Москва: Собор Василия Блаженного (55.7525, 37.6231); СПб: Храм Спаса на Крови (59.9401, 30.3289); и т.д.
        ];

        const services = [
            { name: 'Russia Discovery', activity: 'jeep', phone: '+7 495 800-8-800', email: 'info@russiadiscovery.com', website: 'https://www.russiadiscovery.com' },
            { name: 'Big Country Travel', activity: 'kayaking', phone: 'N/A', email: 'info@bigcountry.travel', website: 'https://bigcountry.travel' },
            { name: 'Adventure Guide', activity: 'hiking', phone: '+7 902 925-11-02', email: 'info@adventure-guide.ru', website: 'https://adventure-guide.ru' },
            { name: 'RaftSiberia', activity: 'rafting', phone: '(541) 386-2271', email: 'info@raftsiberia.com', website: 'https://www.raftsiberia.com' },
            { name: 'Elbrus Elevation', activity: 'paragliding', phone: 'N/A', email: 'info@elbrus-elevation.com', website: 'https://www.tripadvisor.com/Attraction_Review-g298533-d13927472' },
            // Добавьте больше: Из поиска — Sayan Ring (+7 (391) 2-220-900), Kola Travel (рафтинг) и т.д. Группируйте по активности.
        ];
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initMap();
            listAttractions();
            listServices();

            const search = document.getElementById('search');
            if (search) search.addEventListener('input', filterResults);
            
            const filter = document.getElementById('filter');
            if (filter) filter.addEventListener('change', filterResults);
            
            const activityFilter = document.getElementById('activity-filter');
            if (activityFilter) activityFilter.addEventListener('change', filterServices);
            
            const getLocBtn = document.getElementById('get-location');
            if (getLocBtn) getLocBtn.addEventListener('click', getUserLocation);
            
            showSection('home'); // Показать главную по умолчанию
        });

        function showSection(section) {
            document.getElementById('main-home').classList.add('hidden');
            document.getElementById('main-attractions').classList.add('hidden');
            document.getElementById('main-services').classList.add('hidden');
            
            if (section === 'home') {
                document.getElementById('main-home').classList.remove('hidden');
            } else if (section === 'attractions') {
                document.getElementById('main-attractions').classList.remove('hidden');
            } else if (section === 'services') {
                document.getElementById('main-services').classList.remove('hidden');
            }
        }

        function initMap() {
            const map = L.map('map').setView([55.7558, 37.6173], 4); // Центр России
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
            
            attractions.forEach(attr => {
                L.marker([attr.lat, attr.lng]).addTo(map)
                    .bindPopup(`<h3>${attr.name}</h3><p>${attr.description}</p><img src="${attr.image}" alt="${attr.name}" width="100">`);
            });
        }

        function listAttractions() {
            const list = document.getElementById('attraction-list');
            attractions.forEach(attr => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<img src="${attr.image}" alt="${attr.name}">
                                  <h3>${attr.name}</h3>
                                  <p>${attr.description}</p>
                                  <p>Регион: ${attr.region}</p>`;
                list.appendChild(card);
            });
        }

        function listServices() {
            const list = document.getElementById('service-list');
            services.forEach(svc => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<h3>${svc.name}</h3>
                                  <p>Активность: ${svc.activity}</p>
                                  <p>Контакты: ${svc.phone} | ${svc.email}</p>
                                  <a href="${svc.website}" target="_blank">Сайт</a>
                                  <button>Забронировать</button>`;
                list.appendChild(card);
            });
        }

        function filterResults() {
            const query = document.getElementById('search').value.toLowerCase();
            const cat = document.getElementById('filter').value;
            const results = document.getElementById('results');
            results.innerHTML = '';
            attractions.filter(attr => 
                (attr.name.toLowerCase().includes(query) || attr.region.toLowerCase().includes(query)) &&
                (!cat || attr.category === cat)
            ).forEach(attr => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<h3>${attr.name}</h3><p>${attr.description}</p>`;
                results.appendChild(card);
            });
        }

        function filterServices() {
            const cat = document.getElementById('activity-filter').value;
            const list = document.getElementById('service-list');
            list.innerHTML = '';
            services.filter(svc => !cat || svc.activity === cat).forEach(svc => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<h3>${svc.name}</h3><p>Активность: ${svc.activity}</p><p>Контакты: ${svc.phone} | ${svc.email}</p><a href="${svc.website}">Сайт</a><button>Забронировать</button>`;
                list.appendChild(card);
            });
        }

        function getUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const userLat = pos.coords.latitude;
                    const userLng = pos.coords.longitude;
                    const results = document.getElementById('results');
                    results.innerHTML = '<h3>Ближайшие достопримечательности</h3>';
                    
                    attractions.sort((a, b) => 
                        haversine(userLat, userLng, a.lat, a.lng) - haversine(userLat, userLng, b.lat, b.lng)
                    ).slice(0, 10).forEach(attr => {
                        const dist = haversine(userLat, userLng, attr.lat, attr.lng).toFixed(2);
                        const card = document.createElement('div');
                        card.className = 'card';
                        card.innerHTML = `<h3>${attr.name}</h3><p>${attr.description}</p><p>Расстояние: ${dist} км</p>`;
                        results.appendChild(card);
                    });
                    
                    // Аналогично для услуг, если нужно
                }, () => alert('Доступ к геолокации запрещен.'));
            } else {
                alert('Геолокация не поддерживается.');
            }
        }

        function haversine(lat1, lon1, lat2, lon2) {
            const R = 6371; // Радиус Земли в км
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }
    </script>
</body>
</html>
